{"ast":null,"code":"import _objectSpread from\"/Users/user/TuAppDeAccesorios/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// ==================================================================\n// PAYMENT GATEWAY - PASARELA DE PAGO\n// ==================================================================\nimport React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const PaymentGateway=_ref=>{let{cartItems,totalAmount,onConfirmPayment,onCancel}=_ref;const[paymentMethod,setPaymentMethod]=useState('efectivo');const[amountReceived,setAmountReceived]=useState(totalAmount.toString());const[cardDetails,setCardDetails]=useState({cardNumber:'',expiryDate:'',cvv:'',cardholderName:''});const[transferDetails,setTransferDetails]=useState({referenceNumber:'',bank:''});const change=paymentMethod==='efectivo'?Math.max(0,parseFloat(amountReceived)-totalAmount):0;const isValidPayment=()=>{if(paymentMethod==='efectivo'){return parseFloat(amountReceived)>=totalAmount;}if(paymentMethod==='tarjeta'){return cardDetails.cardNumber&&cardDetails.expiryDate&&cardDetails.cvv&&cardDetails.cardholderName;}if(paymentMethod==='transferencia'){return transferDetails.referenceNumber&&transferDetails.bank;}return false;};const handleConfirmPayment=()=>{if(!isValidPayment())return;const paymentData=_objectSpread(_objectSpread(_objectSpread({method:paymentMethod,amount:totalAmount},paymentMethod==='efectivo'&&{amountReceived:parseFloat(amountReceived),change}),paymentMethod==='tarjeta'&&{cardDetails}),paymentMethod==='transferencia'&&{transferDetails});onConfirmPayment(paymentData);};return/*#__PURE__*/_jsx(\"div\",{className:\"payment-gateway-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"payment-gateway-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Procesar Pago\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onCancel,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"purchase-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Resumen de Compra\"}),/*#__PURE__*/_jsx(\"div\",{className:\"items-summary\",children:cartItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"item-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-name\",children:item.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-quantity\",children:[\"x\",item.quantity_in_cart]}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-total\",children:[\"$\",(item.selling_price*item.quantity_in_cart).toLocaleString('es-CO')]})]},item.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"total-amount\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Total: $\",totalAmount.toLocaleString('es-CO')]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-methods\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"M\\xE9todo de Pago\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-options\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"payment-option \".concat(paymentMethod==='efectivo'?'selected':''),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"efectivo\",checked:paymentMethod==='efectivo',onChange:e=>setPaymentMethod(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCB5 Efectivo\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"payment-option \".concat(paymentMethod==='tarjeta'?'selected':''),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"tarjeta\",checked:paymentMethod==='tarjeta',onChange:e=>setPaymentMethod(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCB3 Tarjeta\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"payment-option \".concat(paymentMethod==='transferencia'?'selected':''),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"transferencia\",checked:paymentMethod==='transferencia',onChange:e=>setPaymentMethod(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDFE6 Transferencia\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-details\",children:[paymentMethod==='efectivo'&&/*#__PURE__*/_jsxs(\"div\",{className:\"cash-payment\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Pago en Efectivo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cash-input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Monto Recibido:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amountReceived,onChange:e=>setAmountReceived(e.target.value),min:totalAmount,step:\"0.01\"})]}),change>0&&/*#__PURE__*/_jsx(\"div\",{className:\"change-amount\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Cambio: $\",change.toLocaleString('es-CO')]})})]}),paymentMethod==='tarjeta'&&/*#__PURE__*/_jsxs(\"div\",{className:\"card-payment\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Pago con Tarjeta\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"N\\xFAmero de tarjeta\",value:cardDetails.cardNumber,onChange:e=>setCardDetails(_objectSpread(_objectSpread({},cardDetails),{},{cardNumber:e.target.value})),maxLength:19}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"MM/AA\",value:cardDetails.expiryDate,onChange:e=>setCardDetails(_objectSpread(_objectSpread({},cardDetails),{},{expiryDate:e.target.value})),maxLength:5}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"CVV\",value:cardDetails.cvv,onChange:e=>setCardDetails(_objectSpread(_objectSpread({},cardDetails),{},{cvv:e.target.value})),maxLength:4})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre del titular\",value:cardDetails.cardholderName,onChange:e=>setCardDetails(_objectSpread(_objectSpread({},cardDetails),{},{cardholderName:e.target.value}))})]})]}),paymentMethod==='transferencia'&&/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-payment\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Pago por Transferencia\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"N\\xFAmero de referencia\",value:transferDetails.referenceNumber,onChange:e=>setTransferDetails(_objectSpread(_objectSpread({},transferDetails),{},{referenceNumber:e.target.value}))}),/*#__PURE__*/_jsxs(\"select\",{value:transferDetails.bank,onChange:e=>setTransferDetails(_objectSpread(_objectSpread({},transferDetails),{},{bank:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar banco\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bancolombia\",children:\"Bancolombia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"davivienda\",children:\"Davivienda\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bbva\",children:\"BBVA\"}),/*#__PURE__*/_jsx(\"option\",{value:\"nequi\",children:\"Nequi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"daviplata\",children:\"Daviplata\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel-button\",onClick:onCancel,children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"confirm-button \".concat(isValidPayment()?'enabled':'disabled'),onClick:handleConfirmPayment,disabled:!isValidPayment(),children:[\"Confirmar Pago - $\",totalAmount.toLocaleString('es-CO')]})]})]})});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}