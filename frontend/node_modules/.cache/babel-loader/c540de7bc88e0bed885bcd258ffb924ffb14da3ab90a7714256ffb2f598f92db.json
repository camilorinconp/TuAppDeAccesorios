{"ast":null,"code":"import _objectSpread from\"/Users/user/TuAppDeAccesorios/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{searchProducts,postSale}from'../services/api';// import { useAuth } from '../context/AuthContext';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const POSPage=()=>{const[cart,setCart]=useState([]);const[query,setQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[isSearching,setIsSearching]=useState(false);// const { isAuthenticated } = useAuth(); // Para verificar el rol si es necesario\n// Búsqueda automática con debounce cuando cambia el query\nuseEffect(()=>{const timeoutId=setTimeout(()=>{if(query.trim()!==''){performSearch();}else{setSearchResults([]);}},300);// Espera 300ms después de que el usuario deje de escribir\nreturn()=>clearTimeout(timeoutId);},[query]);const performSearch=async()=>{if(query.trim()===''){setSearchResults([]);return;}setIsSearching(true);try{const foundProducts=await searchProducts(query);setSearchResults(foundProducts);setError(null);}catch(err){setError(\"Error al buscar productos.\");setSearchResults([]);}finally{setIsSearching(false);}};const handleSearch=async()=>{await performSearch();};const handleAddProductToCart=product=>{setCart(prevCart=>{const existingItem=prevCart.find(item=>item.id===product.id);if(existingItem){if(existingItem.quantity_in_cart<product.stock_quantity){return prevCart.map(item=>item.id===product.id?_objectSpread(_objectSpread({},item),{},{quantity_in_cart:item.quantity_in_cart+1}):item);}else{setError(\"No hay suficiente stock para \".concat(product.name,\". Stock actual: \").concat(product.stock_quantity));return prevCart;}}else{if(product.stock_quantity>0){return[...prevCart,_objectSpread(_objectSpread({},product),{},{quantity_in_cart:1})];}else{setError(\"El producto \".concat(product.name,\" no tiene stock.\"));return prevCart;}}});setSuccess(null);};const handleRemoveProductFromCart=productId=>{setCart(prevCart=>prevCart.filter(item=>item.id!==productId));};const handleFinalizeSale=async()=>{if(cart.length===0){setError(\"El carrito está vacío.\");return;}// user_id debe venir del token JWT o del contexto de autenticación\n// Por ahora, lo hardcodeamos a 1 para pruebas.\nconst userId=1;const salePayload={user_id:userId,items:cart.map(item=>({product_id:item.id,quantity_sold:item.quantity_in_cart,price_at_time_of_sale:item.selling_price})),total_amount:cart.reduce((acc,item)=>acc+item.selling_price*item.quantity_in_cart,0)};try{await postSale(salePayload);setSuccess(\"¡Venta registrada con éxito!\");setCart([]);// Limpiar carrito\nsetError(null);setSearchResults([]);// Limpiar resultados de búsqueda\nsetQuery('');}catch(err){setError(\"Error al registrar la venta: \".concat(err.message,\".\"));setSuccess(null);}};const totalAmount=cart.reduce((acc,item)=>acc+item.selling_price*item.quantity_in_cart,0);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Punto de Venta\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),success&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:success}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSearch(),placeholder:\"Buscar producto por nombre o SKU...\",style:{padding:'8px',width:'300px',marginRight:'10px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,style:{padding:'8px 15px'},disabled:isSearching,children:isSearching?'Buscando...':'Buscar'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',border:'1px solid #eee',padding:'10px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Resultados de B\\xFAsqueda\"}),isSearching?/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDD0D Buscando productos...\"}):searchResults.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No hay resultados.\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:searchResults.map(product=>/*#__PURE__*/_jsxs(\"li\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'5px 0',borderBottom:'1px dotted #eee'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[product.name,\" (SKU: \",product.sku,\") - $\",product.selling_price.toFixed(2),\" - Stock: \",product.stock_quantity]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddProductToCart(product),disabled:product.stock_quantity===0,children:\"A\\xF1adir al Carrito\"})]},product.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',border:'1px solid #ccc',padding:'10px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Carrito de Compras\"}),cart.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"El carrito est\\xE1 vac\\xEDo.\"}):/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Producto\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Precio Unit.\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Subtotal\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Acci\\xF3n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cart.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:item.name}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:item.quantity_in_cart}),/*#__PURE__*/_jsxs(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:[\"$\",item.selling_price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:[\"$\",(item.selling_price*item.quantity_in_cart).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveProductFromCart(item.id),children:\"Eliminar\"})})]},item.id))})]}),/*#__PURE__*/_jsxs(\"h3\",{style:{textAlign:'right',marginTop:'10px'},children:[\"Total: $\",totalAmount.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFinalizeSale,style:{marginTop:'20px',padding:'10px 20px',fontSize:'1.2em',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'5px',cursor:'pointer'},disabled:cart.length===0,children:\"Finalizar Venta\"})]});};export default POSPage;","map":{"version":3,"names":["React","useState","useEffect","searchProducts","postSale","jsx","_jsx","jsxs","_jsxs","POSPage","cart","setCart","query","setQuery","searchResults","setSearchResults","error","setError","success","setSuccess","isSearching","setIsSearching","timeoutId","setTimeout","trim","performSearch","clearTimeout","foundProducts","err","handleSearch","handleAddProductToCart","product","prevCart","existingItem","find","item","id","quantity_in_cart","stock_quantity","map","_objectSpread","concat","name","handleRemoveProductFromCart","productId","filter","handleFinalizeSale","length","userId","salePayload","user_id","items","product_id","quantity_sold","price_at_time_of_sale","selling_price","total_amount","reduce","acc","message","totalAmount","style","padding","children","color","marginBottom","type","value","onChange","e","target","onKeyPress","key","placeholder","width","marginRight","onClick","disabled","border","listStyle","display","justifyContent","alignItems","borderBottom","sku","toFixed","borderCollapse","textAlign","marginTop","fontSize","backgroundColor","borderRadius","cursor"],"sources":["/Users/user/TuAppDeAccesorios/frontend/src/pages/POSPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Product, CartItem, SalePayload } from '../types';\nimport { searchProducts, postSale } from '../services/api';\n// import { useAuth } from '../context/AuthContext';\n\nconst POSPage: React.FC = () => {\n    const [cart, setCart] = useState<CartItem[]>([]);\n    const [query, setQuery] = useState('');\n    const [searchResults, setSearchResults] = useState<Product[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [success, setSuccess] = useState<string | null>(null);\n    const [isSearching, setIsSearching] = useState(false);\n    // const { isAuthenticated } = useAuth(); // Para verificar el rol si es necesario\n\n    // Búsqueda automática con debounce cuando cambia el query\n    useEffect(() => {\n        const timeoutId = setTimeout(() => {\n            if (query.trim() !== '') {\n                performSearch();\n            } else {\n                setSearchResults([]);\n            }\n        }, 300); // Espera 300ms después de que el usuario deje de escribir\n\n        return () => clearTimeout(timeoutId);\n    }, [query]);\n\n    const performSearch = async () => {\n        if (query.trim() === '') {\n            setSearchResults([]);\n            return;\n        }\n        setIsSearching(true);\n        try {\n            const foundProducts = await searchProducts(query);\n            setSearchResults(foundProducts);\n            setError(null);\n        } catch (err) {\n            setError(\"Error al buscar productos.\");\n            setSearchResults([]);\n        } finally {\n            setIsSearching(false);\n        }\n    };\n\n    const handleSearch = async () => {\n        await performSearch();\n    };\n\n    const handleAddProductToCart = (product: Product) => {\n        setCart(prevCart => {\n            const existingItem = prevCart.find(item => item.id === product.id);\n            if (existingItem) {\n                if (existingItem.quantity_in_cart < product.stock_quantity) {\n                    return prevCart.map(item =>\n                        item.id === product.id\n                            ? { ...item, quantity_in_cart: item.quantity_in_cart + 1 }\n                            : item\n                    );\n                } else {\n                    setError(`No hay suficiente stock para ${product.name}. Stock actual: ${product.stock_quantity}`);\n                    return prevCart;\n                }\n            } else {\n                if (product.stock_quantity > 0) {\n                    return [...prevCart, { ...product, quantity_in_cart: 1 }];\n                } else {\n                    setError(`El producto ${product.name} no tiene stock.`);\n                    return prevCart;\n                }\n            }\n        });\n        setSuccess(null);\n    };\n\n    const handleRemoveProductFromCart = (productId: number) => {\n        setCart(prevCart => prevCart.filter(item => item.id !== productId));\n    };\n\n    const handleFinalizeSale = async () => {\n        if (cart.length === 0) {\n            setError(\"El carrito está vacío.\");\n            return;\n        }\n\n        // user_id debe venir del token JWT o del contexto de autenticación\n        // Por ahora, lo hardcodeamos a 1 para pruebas.\n        const userId = 1; \n\n        const salePayload: SalePayload = {\n            user_id: userId, \n            items: cart.map(item => ({\n                product_id: item.id,\n                quantity_sold: item.quantity_in_cart,\n                price_at_time_of_sale: item.selling_price,\n            })),\n            total_amount: cart.reduce((acc, item) => acc + item.selling_price * item.quantity_in_cart, 0),\n        };\n\n        try {\n            await postSale(salePayload);\n            setSuccess(\"¡Venta registrada con éxito!\");\n            setCart([]); // Limpiar carrito\n            setError(null);\n            setSearchResults([]); // Limpiar resultados de búsqueda\n            setQuery('');\n        } catch (err: any) {\n            setError(`Error al registrar la venta: ${err.message}.`);\n            setSuccess(null);\n        }\n    };\n\n    const totalAmount = cart.reduce((acc, item) => acc + item.selling_price * item.quantity_in_cart, 0);\n\n    return (\n        <div style={{ padding: '20px' }}>\n            <h1>Punto de Venta</h1>\n            {error && <p style={{ color: 'red' }}>{error}</p>}\n            {success && <p style={{ color: 'green' }}>{success}</p>}\n            \n            <div style={{ marginBottom: '20px' }}>\n                <input\n                    type=\"text\"\n                    value={query}\n                    onChange={(e) => setQuery(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n                    placeholder=\"Buscar producto por nombre o SKU...\"\n                    style={{ padding: '8px', width: '300px', marginRight: '10px' }}\n                />\n                <button onClick={handleSearch} style={{ padding: '8px 15px' }} disabled={isSearching}>\n                    {isSearching ? 'Buscando...' : 'Buscar'}\n                </button>\n            </div>\n\n            <div style={{ marginBottom: '20px', border: '1px solid #eee', padding: '10px' }}>\n                <h3>Resultados de Búsqueda</h3>\n                {isSearching ? (\n                    <p>🔍 Buscando productos...</p>\n                ) : searchResults.length === 0 ? (\n                    <p>No hay resultados.</p>\n                ) : (\n                    <ul style={{ listStyle: 'none', padding: 0 }}>\n                        {searchResults.map(product => (\n                            <li key={product.id} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '5px 0', borderBottom: '1px dotted #eee' }}>\n                                <span>{product.name} (SKU: {product.sku}) - ${product.selling_price.toFixed(2)} - Stock: {product.stock_quantity}</span>\n                                <button onClick={() => handleAddProductToCart(product)} disabled={product.stock_quantity === 0}>Añadir al Carrito</button>\n                            </li>\n                        ))}\n                    </ul>\n                )}\n            </div>\n\n            <div style={{ marginBottom: '20px', border: '1px solid #ccc', padding: '10px' }}>\n                <h2>Carrito de Compras</h2>\n                {cart.length === 0 ? (\n                    <p>El carrito está vacío.</p>\n                ) : (\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n                        <thead>\n                            <tr>\n                                <th style={{ border: '1px solid #ddd', padding: '8px' }}>Producto</th>\n                                <th style={{ border: '1px solid #ddd', padding: '8px' }}>Cantidad</th>\n                                <th style={{ border: '1px solid #ddd', padding: '8px' }}>Precio Unit.</th>\n                                <th style={{ border: '1px solid #ddd', padding: '8px' }}>Subtotal</th>\n                                <th style={{ border: '1px solid #ddd', padding: '8px' }}>Acción</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {cart.map(item => (\n                                <tr key={item.id}>\n                                    <td style={{ border: '1px solid #ddd', padding: '8px' }}>{item.name}</td>\n                                    <td style={{ border: '1px solid #ddd', padding: '8px' }}>{item.quantity_in_cart}</td>\n                                    <td style={{ border: '1px solid #ddd', padding: '8px' }}>${item.selling_price.toFixed(2)}</td>\n                                    <td style={{ border: '1px solid #ddd', padding: '8px' }}>${(item.selling_price * item.quantity_in_cart).toFixed(2)}</td>\n                                    <td style={{ border: '1px solid #ddd', padding: '8px' }}>\n                                        <button onClick={() => handleRemoveProductFromCart(item.id)}>Eliminar</button>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                )}\n                <h3 style={{ textAlign: 'right', marginTop: '10px' }}>Total: ${totalAmount.toFixed(2)}</h3>\n            </div>\n\n            <button \n                onClick={handleFinalizeSale} \n                style={{ marginTop: '20px', padding: '10px 20px', fontSize: '1.2em', backgroundColor: '#28a745', color: 'white', border: 'none', borderRadius: '5px', cursor: 'pointer' }}\n                disabled={cart.length === 0}\n            >\n                Finalizar Venta\n            </button>\n        </div>\n    );\n};\n\nexport default POSPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}