{"ast":null,"code":"import { useState, useCallback } from 'react';\nimport { getProductNameSuggestions } from '../services/api';\nexport const useProductNameAutocomplete = () => {\n  const [state, setState] = useState({\n    suggestions: [],\n    isLoading: false,\n    error: null,\n    showSuggestions: false\n  });\n  const getSuggestions = useCallback(async query => {\n    // No buscar si la consulta es muy corta\n    if (!query || query.trim().length < 2) {\n      setState(prev => ({\n        ...prev,\n        suggestions: [],\n        showSuggestions: false,\n        error: null\n      }));\n      return;\n    }\n    setState(prev => ({\n      ...prev,\n      isLoading: true,\n      error: null\n    }));\n    try {\n      const result = await getProductNameSuggestions(query.trim(), 8);\n      setState(prev => ({\n        ...prev,\n        suggestions: result.suggestions,\n        showSuggestions: result.suggestions.length > 0,\n        isLoading: false,\n        error: null\n      }));\n    } catch (error) {\n      setState(prev => ({\n        ...prev,\n        suggestions: [],\n        showSuggestions: false,\n        isLoading: false,\n        error: 'Error al obtener sugerencias'\n      }));\n    }\n  }, []);\n\n  // Debounce para evitar demasiadas peticiones\n  const debouncedGetSuggestions = useCallback(debounce(getSuggestions, 300),\n  // 300ms de delay\n  [getSuggestions]);\n  const hideSuggestions = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      showSuggestions: false\n    }));\n  }, []);\n  const clearSuggestions = useCallback(() => {\n    setState({\n      suggestions: [],\n      isLoading: false,\n      error: null,\n      showSuggestions: false\n    });\n  }, []);\n  return {\n    ...state,\n    getSuggestions: debouncedGetSuggestions,\n    hideSuggestions,\n    clearSuggestions\n  };\n};\n\n// Función debounce\nfunction debounce(func, wait) {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = window.setTimeout(() => func(...args), wait);\n  };\n}","map":{"version":3,"names":["useState","useCallback","getProductNameSuggestions","useProductNameAutocomplete","state","setState","suggestions","isLoading","error","showSuggestions","getSuggestions","query","trim","length","prev","result","debouncedGetSuggestions","debounce","hideSuggestions","clearSuggestions","func","wait","timeout","args","clearTimeout","window","setTimeout"],"sources":["/Users/user/TuAppDeAccesorios/frontend/src/hooks/useProductNameAutocomplete.ts"],"sourcesContent":["import { useState, useCallback } from 'react';\nimport { getProductNameSuggestions } from '../services/api';\n\ninterface AutocompleteState {\n  suggestions: string[];\n  isLoading: boolean;\n  error: string | null;\n  showSuggestions: boolean;\n}\n\nexport const useProductNameAutocomplete = () => {\n  const [state, setState] = useState<AutocompleteState>({\n    suggestions: [],\n    isLoading: false,\n    error: null,\n    showSuggestions: false\n  });\n\n  const getSuggestions = useCallback(async (query: string) => {\n    // No buscar si la consulta es muy corta\n    if (!query || query.trim().length < 2) {\n      setState(prev => ({\n        ...prev,\n        suggestions: [],\n        showSuggestions: false,\n        error: null\n      }));\n      return;\n    }\n\n    setState(prev => ({\n      ...prev,\n      isLoading: true,\n      error: null\n    }));\n\n    try {\n      const result = await getProductNameSuggestions(query.trim(), 8);\n      \n      setState(prev => ({\n        ...prev,\n        suggestions: result.suggestions,\n        showSuggestions: result.suggestions.length > 0,\n        isLoading: false,\n        error: null\n      }));\n    } catch (error) {\n      setState(prev => ({\n        ...prev,\n        suggestions: [],\n        showSuggestions: false,\n        isLoading: false,\n        error: 'Error al obtener sugerencias'\n      }));\n    }\n  }, []);\n\n  // Debounce para evitar demasiadas peticiones\n  const debouncedGetSuggestions = useCallback(\n    debounce(getSuggestions, 300), // 300ms de delay\n    [getSuggestions]\n  );\n\n  const hideSuggestions = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      showSuggestions: false\n    }));\n  }, []);\n\n  const clearSuggestions = useCallback(() => {\n    setState({\n      suggestions: [],\n      isLoading: false,\n      error: null,\n      showSuggestions: false\n    });\n  }, []);\n\n  return {\n    ...state,\n    getSuggestions: debouncedGetSuggestions,\n    hideSuggestions,\n    clearSuggestions\n  };\n};\n\n// Función debounce\nfunction debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: number | undefined;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = window.setTimeout(() => func(...args), wait);\n  };\n}"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC7C,SAASC,yBAAyB,QAAQ,iBAAiB;AAS3D,OAAO,MAAMC,0BAA0B,GAAGA,CAAA,KAAM;EAC9C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAAoB;IACpDM,WAAW,EAAE,EAAE;IACfC,SAAS,EAAE,KAAK;IAChBC,KAAK,EAAE,IAAI;IACXC,eAAe,EAAE;EACnB,CAAC,CAAC;EAEF,MAAMC,cAAc,GAAGT,WAAW,CAAC,MAAOU,KAAa,IAAK;IAC1D;IACA,IAAI,CAACA,KAAK,IAAIA,KAAK,CAACC,IAAI,CAAC,CAAC,CAACC,MAAM,GAAG,CAAC,EAAE;MACrCR,QAAQ,CAACS,IAAI,KAAK;QAChB,GAAGA,IAAI;QACPR,WAAW,EAAE,EAAE;QACfG,eAAe,EAAE,KAAK;QACtBD,KAAK,EAAE;MACT,CAAC,CAAC,CAAC;MACH;IACF;IAEAH,QAAQ,CAACS,IAAI,KAAK;MAChB,GAAGA,IAAI;MACPP,SAAS,EAAE,IAAI;MACfC,KAAK,EAAE;IACT,CAAC,CAAC,CAAC;IAEH,IAAI;MACF,MAAMO,MAAM,GAAG,MAAMb,yBAAyB,CAACS,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;MAE/DP,QAAQ,CAACS,IAAI,KAAK;QAChB,GAAGA,IAAI;QACPR,WAAW,EAAES,MAAM,CAACT,WAAW;QAC/BG,eAAe,EAAEM,MAAM,CAACT,WAAW,CAACO,MAAM,GAAG,CAAC;QAC9CN,SAAS,EAAE,KAAK;QAChBC,KAAK,EAAE;MACT,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdH,QAAQ,CAACS,IAAI,KAAK;QAChB,GAAGA,IAAI;QACPR,WAAW,EAAE,EAAE;QACfG,eAAe,EAAE,KAAK;QACtBF,SAAS,EAAE,KAAK;QAChBC,KAAK,EAAE;MACT,CAAC,CAAC,CAAC;IACL;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMQ,uBAAuB,GAAGf,WAAW,CACzCgB,QAAQ,CAACP,cAAc,EAAE,GAAG,CAAC;EAAE;EAC/B,CAACA,cAAc,CACjB,CAAC;EAED,MAAMQ,eAAe,GAAGjB,WAAW,CAAC,MAAM;IACxCI,QAAQ,CAACS,IAAI,KAAK;MAChB,GAAGA,IAAI;MACPL,eAAe,EAAE;IACnB,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMU,gBAAgB,GAAGlB,WAAW,CAAC,MAAM;IACzCI,QAAQ,CAAC;MACPC,WAAW,EAAE,EAAE;MACfC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE,IAAI;MACXC,eAAe,EAAE;IACnB,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACL,GAAGL,KAAK;IACRM,cAAc,EAAEM,uBAAuB;IACvCE,eAAe;IACfC;EACF,CAAC;AACH,CAAC;;AAED;AACA,SAASF,QAAQA,CACfG,IAAO,EACPC,IAAY,EACsB;EAClC,IAAIC,OAA2B;EAC/B,OAAO,CAAC,GAAGC,IAAmB,KAAK;IACjCC,YAAY,CAACF,OAAO,CAAC;IACrBA,OAAO,GAAGG,MAAM,CAACC,UAAU,CAAC,MAAMN,IAAI,CAAC,GAAGG,IAAI,CAAC,EAAEF,IAAI,CAAC;EACxD,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}