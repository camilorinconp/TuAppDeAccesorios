{"ast":null,"code":"// ==================================================================\n// CART SLICE - GESTI√ìN DEL CARRITO DE COMPRAS\n// ==================================================================\n\nimport { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  items: [],\n  totalAmount: 0,\n  totalItems: 0\n};\nconst calculateTotals = items => {\n  const totalAmount = items.reduce((sum, item) => sum + item.selling_price * item.quantity_in_cart, 0);\n  const totalItems = items.reduce((sum, item) => sum + item.quantity_in_cart, 0);\n  return {\n    totalAmount,\n    totalItems\n  };\n};\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    addToCart: (state, action) => {\n      const product = action.payload;\n      console.log('üõí addToCart llamado con producto:', product);\n      console.log('üõí Estado actual del carrito:', state.items.length, 'items');\n      const existingItem = state.items.find(item => item.id === product.id);\n      if (existingItem) {\n        console.log('üîÑ Producto ya existe, incrementando cantidad');\n        existingItem.quantity_in_cart += 1;\n      } else {\n        console.log('‚ûï Producto nuevo, agregando al carrito');\n        state.items.push({\n          ...product,\n          quantity_in_cart: 1\n        });\n      }\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n      console.log('üõí Producto agregado al carrito:', product.name);\n      console.log('üõí Nuevo estado del carrito:', state.items.length, 'items, total:', state.totalAmount);\n    },\n    removeFromCart: (state, action) => {\n      const productId = action.payload;\n      state.items = state.items.filter(item => item.id !== productId);\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n      console.log('üóëÔ∏è Producto removido del carrito:', productId);\n    },\n    updateQuantity: (state, action) => {\n      const {\n        id,\n        quantity\n      } = action.payload;\n      const item = state.items.find(item => item.id === id);\n      if (item && quantity > 0) {\n        item.quantity_in_cart = quantity;\n      } else if (item && quantity <= 0) {\n        state.items = state.items.filter(item => item.id !== id);\n      }\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n    },\n    clearCart: state => {\n      console.log('üßπ Limpiando carrito - productos anteriores:', state.items.length);\n      state.items = [];\n      state.totalAmount = 0;\n      state.totalItems = 0;\n      console.log('‚úÖ Carrito limpiado exitosamente');\n    }\n  }\n});\nexport const {\n  addToCart,\n  removeFromCart,\n  updateQuantity,\n  clearCart\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","items","totalAmount","totalItems","calculateTotals","reduce","sum","item","selling_price","quantity_in_cart","cartSlice","name","reducers","addToCart","state","action","product","payload","console","log","length","existingItem","find","id","push","totals","removeFromCart","productId","filter","updateQuantity","quantity","clearCart","actions","reducer"],"sources":["/Users/user/TuAppDeAccesorios/frontend/src/store/slices/cartSlice.ts"],"sourcesContent":["// ==================================================================\n// CART SLICE - GESTI√ìN DEL CARRITO DE COMPRAS\n// ==================================================================\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { CartItem, Product } from '../../types/core';\n\ninterface CartState {\n  items: CartItem[];\n  totalAmount: number;\n  totalItems: number;\n}\n\nconst initialState: CartState = {\n  items: [],\n  totalAmount: 0,\n  totalItems: 0,\n};\n\nconst calculateTotals = (items: CartItem[]) => {\n  const totalAmount = items.reduce(\n    (sum, item) => sum + (item.selling_price * item.quantity_in_cart),\n    0\n  );\n  const totalItems = items.reduce(\n    (sum, item) => sum + item.quantity_in_cart,\n    0\n  );\n  return { totalAmount, totalItems };\n};\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    addToCart: (state, action: PayloadAction<Product>) => {\n      const product = action.payload;\n      console.log('üõí addToCart llamado con producto:', product);\n      console.log('üõí Estado actual del carrito:', state.items.length, 'items');\n      \n      const existingItem = state.items.find(item => item.id === product.id);\n\n      if (existingItem) {\n        console.log('üîÑ Producto ya existe, incrementando cantidad');\n        existingItem.quantity_in_cart += 1;\n      } else {\n        console.log('‚ûï Producto nuevo, agregando al carrito');\n        state.items.push({\n          ...product,\n          quantity_in_cart: 1,\n        });\n      }\n\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n\n      console.log('üõí Producto agregado al carrito:', product.name);\n      console.log('üõí Nuevo estado del carrito:', state.items.length, 'items, total:', state.totalAmount);\n    },\n\n    removeFromCart: (state, action: PayloadAction<number>) => {\n      const productId = action.payload;\n      state.items = state.items.filter(item => item.id !== productId);\n\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n\n      console.log('üóëÔ∏è Producto removido del carrito:', productId);\n    },\n\n    updateQuantity: (state, action: PayloadAction<{ id: number; quantity: number }>) => {\n      const { id, quantity } = action.payload;\n      const item = state.items.find(item => item.id === id);\n\n      if (item && quantity > 0) {\n        item.quantity_in_cart = quantity;\n      } else if (item && quantity <= 0) {\n        state.items = state.items.filter(item => item.id !== id);\n      }\n\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n    },\n\n    clearCart: (state) => {\n      console.log('üßπ Limpiando carrito - productos anteriores:', state.items.length);\n      state.items = [];\n      state.totalAmount = 0;\n      state.totalItems = 0;\n      console.log('‚úÖ Carrito limpiado exitosamente');\n    },\n  },\n});\n\nexport const { addToCart, removeFromCart, updateQuantity, clearCart } = cartSlice.actions;\nexport default cartSlice.reducer;"],"mappings":"AAAA;AACA;AACA;;AAEA,SAASA,WAAW,QAAuB,kBAAkB;AAS7D,MAAMC,YAAuB,GAAG;EAC9BC,KAAK,EAAE,EAAE;EACTC,WAAW,EAAE,CAAC;EACdC,UAAU,EAAE;AACd,CAAC;AAED,MAAMC,eAAe,GAAIH,KAAiB,IAAK;EAC7C,MAAMC,WAAW,GAAGD,KAAK,CAACI,MAAM,CAC9B,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,GAAIC,IAAI,CAACC,aAAa,GAAGD,IAAI,CAACE,gBAAiB,EACjE,CACF,CAAC;EACD,MAAMN,UAAU,GAAGF,KAAK,CAACI,MAAM,CAC7B,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,GAAGC,IAAI,CAACE,gBAAgB,EAC1C,CACF,CAAC;EACD,OAAO;IAAEP,WAAW;IAAEC;EAAW,CAAC;AACpC,CAAC;AAED,MAAMO,SAAS,GAAGX,WAAW,CAAC;EAC5BY,IAAI,EAAE,MAAM;EACZX,YAAY;EACZY,QAAQ,EAAE;IACRC,SAAS,EAAEA,CAACC,KAAK,EAAEC,MAA8B,KAAK;MACpD,MAAMC,OAAO,GAAGD,MAAM,CAACE,OAAO;MAC9BC,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEH,OAAO,CAAC;MAC1DE,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEL,KAAK,CAACb,KAAK,CAACmB,MAAM,EAAE,OAAO,CAAC;MAEzE,MAAMC,YAAY,GAAGP,KAAK,CAACb,KAAK,CAACqB,IAAI,CAACf,IAAI,IAAIA,IAAI,CAACgB,EAAE,KAAKP,OAAO,CAACO,EAAE,CAAC;MAErE,IAAIF,YAAY,EAAE;QAChBH,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC;QAC5DE,YAAY,CAACZ,gBAAgB,IAAI,CAAC;MACpC,CAAC,MAAM;QACLS,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;QACrDL,KAAK,CAACb,KAAK,CAACuB,IAAI,CAAC;UACf,GAAGR,OAAO;UACVP,gBAAgB,EAAE;QACpB,CAAC,CAAC;MACJ;MAEA,MAAMgB,MAAM,GAAGrB,eAAe,CAACU,KAAK,CAACb,KAAK,CAAC;MAC3Ca,KAAK,CAACZ,WAAW,GAAGuB,MAAM,CAACvB,WAAW;MACtCY,KAAK,CAACX,UAAU,GAAGsB,MAAM,CAACtB,UAAU;MAEpCe,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEH,OAAO,CAACL,IAAI,CAAC;MAC7DO,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEL,KAAK,CAACb,KAAK,CAACmB,MAAM,EAAE,eAAe,EAAEN,KAAK,CAACZ,WAAW,CAAC;IACrG,CAAC;IAEDwB,cAAc,EAAEA,CAACZ,KAAK,EAAEC,MAA6B,KAAK;MACxD,MAAMY,SAAS,GAAGZ,MAAM,CAACE,OAAO;MAChCH,KAAK,CAACb,KAAK,GAAGa,KAAK,CAACb,KAAK,CAAC2B,MAAM,CAACrB,IAAI,IAAIA,IAAI,CAACgB,EAAE,KAAKI,SAAS,CAAC;MAE/D,MAAMF,MAAM,GAAGrB,eAAe,CAACU,KAAK,CAACb,KAAK,CAAC;MAC3Ca,KAAK,CAACZ,WAAW,GAAGuB,MAAM,CAACvB,WAAW;MACtCY,KAAK,CAACX,UAAU,GAAGsB,MAAM,CAACtB,UAAU;MAEpCe,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEQ,SAAS,CAAC;IAC9D,CAAC;IAEDE,cAAc,EAAEA,CAACf,KAAK,EAAEC,MAAuD,KAAK;MAClF,MAAM;QAAEQ,EAAE;QAAEO;MAAS,CAAC,GAAGf,MAAM,CAACE,OAAO;MACvC,MAAMV,IAAI,GAAGO,KAAK,CAACb,KAAK,CAACqB,IAAI,CAACf,IAAI,IAAIA,IAAI,CAACgB,EAAE,KAAKA,EAAE,CAAC;MAErD,IAAIhB,IAAI,IAAIuB,QAAQ,GAAG,CAAC,EAAE;QACxBvB,IAAI,CAACE,gBAAgB,GAAGqB,QAAQ;MAClC,CAAC,MAAM,IAAIvB,IAAI,IAAIuB,QAAQ,IAAI,CAAC,EAAE;QAChChB,KAAK,CAACb,KAAK,GAAGa,KAAK,CAACb,KAAK,CAAC2B,MAAM,CAACrB,IAAI,IAAIA,IAAI,CAACgB,EAAE,KAAKA,EAAE,CAAC;MAC1D;MAEA,MAAME,MAAM,GAAGrB,eAAe,CAACU,KAAK,CAACb,KAAK,CAAC;MAC3Ca,KAAK,CAACZ,WAAW,GAAGuB,MAAM,CAACvB,WAAW;MACtCY,KAAK,CAACX,UAAU,GAAGsB,MAAM,CAACtB,UAAU;IACtC,CAAC;IAED4B,SAAS,EAAGjB,KAAK,IAAK;MACpBI,OAAO,CAACC,GAAG,CAAC,8CAA8C,EAAEL,KAAK,CAACb,KAAK,CAACmB,MAAM,CAAC;MAC/EN,KAAK,CAACb,KAAK,GAAG,EAAE;MAChBa,KAAK,CAACZ,WAAW,GAAG,CAAC;MACrBY,KAAK,CAACX,UAAU,GAAG,CAAC;MACpBe,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;IAChD;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEN,SAAS;EAAEa,cAAc;EAAEG,cAAc;EAAEE;AAAU,CAAC,GAAGrB,SAAS,CAACsB,OAAO;AACzF,eAAetB,SAAS,CAACuB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}