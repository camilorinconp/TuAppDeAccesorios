{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{loginUser}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[username,setUsername]=useState('admin');const[password,setPassword]=useState('admin123');const[error,setError]=useState(null);const{login}=useAuth();const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setError(null);console.log('üîê Iniciando login con:',{username,password:'***'});try{console.log('üì§ Llamando a loginUser...');const response=await loginUser(username,password);console.log('‚úÖ Login response:',response);console.log('üîç Verificando estado de autenticaci√≥n...');// Verificar el estado de autenticaci√≥n despu√©s del login\nconst isAuthenticated=await login();console.log('üîç Estado autenticaci√≥n:',isAuthenticated);if(isAuthenticated){console.log('üéâ Login exitoso, navegando a dashboard');navigate('/dashboard');}else{console.log('‚ùå Login fall√≥ en verificaci√≥n');setError(\"Error en la autenticaci√≥n - las credenciales fueron aceptadas pero la verificaci√≥n fall√≥\");}}catch(err){console.error('‚ùå Login error:',err);setError(err.message||\"Credenciales inv√°lidas\");}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',maxWidth:'400px',margin:'50px auto',border:'1px solid #ccc',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",style:{display:'block',marginBottom:'5px'},children:\"Usuario:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:e=>setUsername(e.target.value),style:{width:'100%',padding:'8px',boxSizing:'border-box'},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",style:{display:'block',marginBottom:'5px'},children:\"Contrase\\xF1a:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),style:{width:'100%',padding:'8px',boxSizing:'border-box'},required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:'100%',padding:'10px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'5px',cursor:'pointer'},children:\"Ingresar\"})]})]});};export default LoginPage;","map":{"version":3,"names":["React","useState","useNavigate","useAuth","loginUser","jsx","_jsx","jsxs","_jsxs","LoginPage","username","setUsername","password","setPassword","error","setError","login","navigate","handleSubmit","e","preventDefault","console","log","response","isAuthenticated","err","message","style","padding","maxWidth","margin","border","borderRadius","children","onSubmit","marginBottom","htmlFor","display","type","id","value","onChange","target","width","boxSizing","required","color","backgroundColor","cursor"],"sources":["/Users/user/TuAppDeAccesorios/frontend/src/pages/LoginPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { loginUser } from '../services/api';\n\nconst LoginPage: React.FC = () => {\n  const [username, setUsername] = useState('admin');\n  const [password, setPassword] = useState('admin123');\n  const [error, setError] = useState<string | null>(null);\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    \n    console.log('üîê Iniciando login con:', { username, password: '***' });\n    \n    try {\n      console.log('üì§ Llamando a loginUser...');\n      const response = await loginUser(username, password);\n      console.log('‚úÖ Login response:', response);\n      \n      console.log('üîç Verificando estado de autenticaci√≥n...');\n      // Verificar el estado de autenticaci√≥n despu√©s del login\n      const isAuthenticated = await login();\n      console.log('üîç Estado autenticaci√≥n:', isAuthenticated);\n      \n      if (isAuthenticated) {\n        console.log('üéâ Login exitoso, navegando a dashboard');\n        navigate('/dashboard');\n      } else {\n        console.log('‚ùå Login fall√≥ en verificaci√≥n');\n        setError(\"Error en la autenticaci√≥n - las credenciales fueron aceptadas pero la verificaci√≥n fall√≥\");\n      }\n    } catch (err: any) {\n      console.error('‚ùå Login error:', err);\n      setError(err.message || \"Credenciales inv√°lidas\");\n    }\n  };\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '400px', margin: '50px auto', border: '1px solid #ccc', borderRadius: '8px' }}>\n      <h2>Iniciar Sesi√≥n</h2>\n      <form onSubmit={handleSubmit}>\n        <div style={{ marginBottom: '15px' }}>\n          <label htmlFor=\"username\" style={{ display: 'block', marginBottom: '5px' }}>Usuario:</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}\n            required\n          />\n        </div>\n        <div style={{ marginBottom: '15px' }}>\n          <label htmlFor=\"password\" style={{ display: 'block', marginBottom: '5px' }}>Contrase√±a:</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}\n            required\n          />\n        </div>\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n        <button type=\"submit\" style={{ width: '100%', padding: '10px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '5px', cursor: 'pointer' }}>\n          Ingresar\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default LoginPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}