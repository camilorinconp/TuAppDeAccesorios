{"ast":null,"code":"import _objectSpread from\"/Users/user/TuAppDeAccesorios/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// ==================================================================\n// CART SLICE - GESTIÓN DEL CARRITO DE COMPRAS\n// ==================================================================\nimport{createSlice}from'@reduxjs/toolkit';const initialState={items:[],totalAmount:0,totalItems:0};const calculateTotals=items=>{const totalAmount=items.reduce((sum,item)=>sum+item.selling_price*item.quantity_in_cart,0);const totalItems=items.reduce((sum,item)=>sum+item.quantity_in_cart,0);return{totalAmount,totalItems};};const cartSlice=createSlice({name:'cart',initialState,reducers:{addToCart:(state,action)=>{const product=action.payload;console.log('🛒 addToCart llamado con producto:',product);console.log('🛒 Estado actual del carrito:',state.items.length,'items');const existingItem=state.items.find(item=>item.id===product.id);if(existingItem){console.log('🔄 Producto ya existe, incrementando cantidad');existingItem.quantity_in_cart+=1;}else{console.log('➕ Producto nuevo, agregando al carrito');state.items.push(_objectSpread(_objectSpread({},product),{},{quantity_in_cart:1}));}const totals=calculateTotals(state.items);state.totalAmount=totals.totalAmount;state.totalItems=totals.totalItems;console.log('🛒 Producto agregado al carrito:',product.name);console.log('🛒 Nuevo estado del carrito:',state.items.length,'items, total:',state.totalAmount);},removeFromCart:(state,action)=>{const productId=action.payload;state.items=state.items.filter(item=>item.id!==productId);const totals=calculateTotals(state.items);state.totalAmount=totals.totalAmount;state.totalItems=totals.totalItems;console.log('🗑️ Producto removido del carrito:',productId);},updateQuantity:(state,action)=>{const{id,quantity}=action.payload;const item=state.items.find(item=>item.id===id);if(item&&quantity>0){item.quantity_in_cart=quantity;}else if(item&&quantity<=0){state.items=state.items.filter(item=>item.id!==id);}const totals=calculateTotals(state.items);state.totalAmount=totals.totalAmount;state.totalItems=totals.totalItems;},clearCart:state=>{console.log('🧹 Limpiando carrito - productos anteriores:',state.items.length);state.items=[];state.totalAmount=0;state.totalItems=0;console.log('✅ Carrito limpiado exitosamente');}}});export const{addToCart,removeFromCart,updateQuantity,clearCart}=cartSlice.actions;export default cartSlice.reducer;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}