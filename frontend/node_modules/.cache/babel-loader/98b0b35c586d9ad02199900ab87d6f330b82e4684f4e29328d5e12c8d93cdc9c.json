{"ast":null,"code":"import { useState, useCallback } from 'react';\nimport { checkSkuAvailability } from '../services/api';\nexport const useSkuValidation = excludeProductId => {\n  const [validationState, setValidationState] = useState({\n    isValidating: false,\n    isAvailable: null,\n    message: '',\n    error: null\n  });\n  const validateSku = useCallback(async sku => {\n    // Limpiar estado si SKU está vacío\n    if (!sku || sku.trim().length < 3) {\n      setValidationState({\n        isValidating: false,\n        isAvailable: null,\n        message: '',\n        error: null\n      });\n      return;\n    }\n    setValidationState(prev => ({\n      ...prev,\n      isValidating: true,\n      error: null\n    }));\n    try {\n      const result = await checkSkuAvailability(sku);\n      setValidationState({\n        isValidating: false,\n        isAvailable: result.available,\n        message: result.message,\n        error: null\n      });\n    } catch (error) {\n      setValidationState({\n        isValidating: false,\n        isAvailable: null,\n        message: '',\n        error: 'Error al verificar SKU'\n      });\n    }\n  }, [excludeProductId]);\n\n  // Debounce para evitar demasiadas peticiones\n  const debouncedValidateSku = useCallback(debounce(validateSku, 500),\n  // 500ms de delay\n  [validateSku]);\n  return {\n    ...validationState,\n    validateSku: debouncedValidateSku,\n    clearValidation: () => setValidationState({\n      isValidating: false,\n      isAvailable: null,\n      message: '',\n      error: null\n    })\n  };\n};\n\n// Función debounce\nfunction debounce(func, wait) {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}","map":{"version":3,"names":["useState","useCallback","checkSkuAvailability","useSkuValidation","excludeProductId","validationState","setValidationState","isValidating","isAvailable","message","error","validateSku","sku","trim","length","prev","result","available","debouncedValidateSku","debounce","clearValidation","func","wait","timeout","args","clearTimeout","setTimeout"],"sources":["/Users/user/TuAppDeAccesorios/frontend/src/hooks/useSkuValidation.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { checkSkuAvailability } from '../services/api';\n\ninterface SkuValidationState {\n  isValidating: boolean;\n  isAvailable: boolean | null;\n  message: string;\n  error: string | null;\n}\n\nexport const useSkuValidation = (excludeProductId?: number) => {\n  const [validationState, setValidationState] = useState<SkuValidationState>({\n    isValidating: false,\n    isAvailable: null,\n    message: '',\n    error: null\n  });\n\n  const validateSku = useCallback(async (sku: string) => {\n    // Limpiar estado si SKU está vacío\n    if (!sku || sku.trim().length < 3) {\n      setValidationState({\n        isValidating: false,\n        isAvailable: null,\n        message: '',\n        error: null\n      });\n      return;\n    }\n\n    setValidationState(prev => ({\n      ...prev,\n      isValidating: true,\n      error: null\n    }));\n\n    try {\n      const result = await checkSkuAvailability(sku);\n      \n      setValidationState({\n        isValidating: false,\n        isAvailable: result.available,\n        message: result.message,\n        error: null\n      });\n    } catch (error) {\n      setValidationState({\n        isValidating: false,\n        isAvailable: null,\n        message: '',\n        error: 'Error al verificar SKU'\n      });\n    }\n  }, [excludeProductId]);\n\n  // Debounce para evitar demasiadas peticiones\n  const debouncedValidateSku = useCallback(\n    debounce(validateSku, 500), // 500ms de delay\n    [validateSku]\n  );\n\n  return {\n    ...validationState,\n    validateSku: debouncedValidateSku,\n    clearValidation: () => setValidationState({\n      isValidating: false,\n      isAvailable: null,\n      message: '',\n      error: null\n    })\n  };\n};\n\n// Función debounce\nfunction debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}"],"mappings":"AAAA,SAASA,QAAQ,EAAaC,WAAW,QAAQ,OAAO;AACxD,SAASC,oBAAoB,QAAQ,iBAAiB;AAStD,OAAO,MAAMC,gBAAgB,GAAIC,gBAAyB,IAAK;EAC7D,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGN,QAAQ,CAAqB;IACzEO,YAAY,EAAE,KAAK;IACnBC,WAAW,EAAE,IAAI;IACjBC,OAAO,EAAE,EAAE;IACXC,KAAK,EAAE;EACT,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAGV,WAAW,CAAC,MAAOW,GAAW,IAAK;IACrD;IACA,IAAI,CAACA,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAACC,MAAM,GAAG,CAAC,EAAE;MACjCR,kBAAkB,CAAC;QACjBC,YAAY,EAAE,KAAK;QACnBC,WAAW,EAAE,IAAI;QACjBC,OAAO,EAAE,EAAE;QACXC,KAAK,EAAE;MACT,CAAC,CAAC;MACF;IACF;IAEAJ,kBAAkB,CAACS,IAAI,KAAK;MAC1B,GAAGA,IAAI;MACPR,YAAY,EAAE,IAAI;MAClBG,KAAK,EAAE;IACT,CAAC,CAAC,CAAC;IAEH,IAAI;MACF,MAAMM,MAAM,GAAG,MAAMd,oBAAoB,CAACU,GAAG,CAAC;MAE9CN,kBAAkB,CAAC;QACjBC,YAAY,EAAE,KAAK;QACnBC,WAAW,EAAEQ,MAAM,CAACC,SAAS;QAC7BR,OAAO,EAAEO,MAAM,CAACP,OAAO;QACvBC,KAAK,EAAE;MACT,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdJ,kBAAkB,CAAC;QACjBC,YAAY,EAAE,KAAK;QACnBC,WAAW,EAAE,IAAI;QACjBC,OAAO,EAAE,EAAE;QACXC,KAAK,EAAE;MACT,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACN,gBAAgB,CAAC,CAAC;;EAEtB;EACA,MAAMc,oBAAoB,GAAGjB,WAAW,CACtCkB,QAAQ,CAACR,WAAW,EAAE,GAAG,CAAC;EAAE;EAC5B,CAACA,WAAW,CACd,CAAC;EAED,OAAO;IACL,GAAGN,eAAe;IAClBM,WAAW,EAAEO,oBAAoB;IACjCE,eAAe,EAAEA,CAAA,KAAMd,kBAAkB,CAAC;MACxCC,YAAY,EAAE,KAAK;MACnBC,WAAW,EAAE,IAAI;MACjBC,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;AACH,CAAC;;AAED;AACA,SAASS,QAAQA,CACfE,IAAO,EACPC,IAAY,EACsB;EAClC,IAAIC,OAAuB;EAC3B,OAAO,CAAC,GAAGC,IAAmB,KAAK;IACjCC,YAAY,CAACF,OAAO,CAAC;IACrBA,OAAO,GAAGG,UAAU,CAAC,MAAML,IAAI,CAAC,GAAGG,IAAI,CAAC,EAAEF,IAAI,CAAC;EACjD,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}