{"ast":null,"code":"// ==================================================================\n// CART SLICE - GESTIÓN DEL CARRITO DE COMPRAS\n// ==================================================================\n\nimport { createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  items: [],\n  totalAmount: 0,\n  totalItems: 0\n};\nconst calculateTotals = items => {\n  const totalAmount = items.reduce((sum, item) => sum + item.selling_price * item.quantity_in_cart, 0);\n  const totalItems = items.reduce((sum, item) => sum + item.quantity_in_cart, 0);\n  return {\n    totalAmount,\n    totalItems\n  };\n};\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    addToCart: (state, action) => {\n      const product = action.payload;\n      const existingItem = state.items.find(item => item.id === product.id);\n      if (existingItem) {\n        existingItem.quantity_in_cart += 1;\n      } else {\n        state.items.push({\n          ...product,\n          quantity_in_cart: 1\n        });\n      }\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n    },\n    removeFromCart: (state, action) => {\n      const productId = action.payload;\n      state.items = state.items.filter(item => item.id !== productId);\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n    },\n    updateQuantity: (state, action) => {\n      const {\n        id,\n        quantity\n      } = action.payload;\n      const item = state.items.find(item => item.id === id);\n      if (item && quantity > 0) {\n        item.quantity_in_cart = quantity;\n      } else if (item && quantity <= 0) {\n        state.items = state.items.filter(item => item.id !== id);\n      }\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n    },\n    clearCart: state => {\n      state.items = [];\n      state.totalAmount = 0;\n      state.totalItems = 0;\n    }\n  }\n});\nexport const {\n  addToCart,\n  removeFromCart,\n  updateQuantity,\n  clearCart\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","items","totalAmount","totalItems","calculateTotals","reduce","sum","item","selling_price","quantity_in_cart","cartSlice","name","reducers","addToCart","state","action","product","payload","existingItem","find","id","push","totals","removeFromCart","productId","filter","updateQuantity","quantity","clearCart","actions","reducer"],"sources":["/Users/user/TuAppDeAccesorios/frontend/src/store/slices/cartSlice.ts"],"sourcesContent":["// ==================================================================\n// CART SLICE - GESTIÓN DEL CARRITO DE COMPRAS\n// ==================================================================\n\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { CartItem, Product } from '../../types/core';\n\ninterface CartState {\n  items: CartItem[];\n  totalAmount: number;\n  totalItems: number;\n}\n\nconst initialState: CartState = {\n  items: [],\n  totalAmount: 0,\n  totalItems: 0,\n};\n\nconst calculateTotals = (items: CartItem[]) => {\n  const totalAmount = items.reduce(\n    (sum, item) => sum + (item.selling_price * item.quantity_in_cart),\n    0\n  );\n  const totalItems = items.reduce(\n    (sum, item) => sum + item.quantity_in_cart,\n    0\n  );\n  return { totalAmount, totalItems };\n};\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    addToCart: (state, action: PayloadAction<Product>) => {\n      const product = action.payload;\n      \n      const existingItem = state.items.find(item => item.id === product.id);\n\n      if (existingItem) {\n        existingItem.quantity_in_cart += 1;\n      } else {\n        state.items.push({\n          ...product,\n          quantity_in_cart: 1,\n        });\n      }\n\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n    },\n\n    removeFromCart: (state, action: PayloadAction<number>) => {\n      const productId = action.payload;\n      state.items = state.items.filter(item => item.id !== productId);\n\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n    },\n\n    updateQuantity: (state, action: PayloadAction<{ id: number; quantity: number }>) => {\n      const { id, quantity } = action.payload;\n      const item = state.items.find(item => item.id === id);\n\n      if (item && quantity > 0) {\n        item.quantity_in_cart = quantity;\n      } else if (item && quantity <= 0) {\n        state.items = state.items.filter(item => item.id !== id);\n      }\n\n      const totals = calculateTotals(state.items);\n      state.totalAmount = totals.totalAmount;\n      state.totalItems = totals.totalItems;\n    },\n\n    clearCart: (state) => {\n      state.items = [];\n      state.totalAmount = 0;\n      state.totalItems = 0;\n    },\n  },\n});\n\nexport const { addToCart, removeFromCart, updateQuantity, clearCart } = cartSlice.actions;\nexport default cartSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}